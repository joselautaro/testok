<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Admin - Usuarios</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background:#f6f7f9; }
    .top { display:flex; justify-content: space-between; align-items:center; gap: 12px; }
    .btn { padding:10px 14px; background:#111; color:#fff; text-decoration:none; border-radius:8px; display:inline-block; }
    .msg-ok { padding:10px; background:#e8ffe8; border:1px solid #b6ffb6; margin-top: 12px; border-radius:8px; }
    .msg-err { padding:10px; background:#ffecec; border:1px solid #ffb3b3; margin-top: 12px; border-radius:8px; }
    table { width:100%; border-collapse: collapse; margin-top: 16px; background:#fff; border-radius: 12px; overflow:hidden; }
    th, td { padding: 12px; border-bottom: 1px solid #eee; text-align:left; }
    th { background:#f5f5f5; }
    .role { font-weight: 800; }
    /* ===== TOASTS ===== */
#toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.toast {
  min-width: 260px;
  max-width: 340px;
  padding: 14px 18px;
  border-radius: 12px;
  font-size: 14px;
  color: #111;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
  border-left: 6px solid;
  animation: slideIn .3s ease, fadeOut .3s ease 2.7s forwards;
}

/* Tipos */
.toast.success {
  border-color: #2ecc71;
}

.toast.error {
  border-color: #e74c3c;
}

/* Animaciones */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeOut {
  to {
    opacity: 0;
    transform: translateX(20px);
  }
}

  </style>
</head>
<body>
  <div id="toast-container">
  <div class="toast success" th:if="${ok}" th:text="${ok}"></div>
  <div class="toast error" th:if="${err}" th:text="${err}"></div>
</div>


<div class="top">
  <h1>Usuarios</h1>
  <div style="display:flex; gap:10px;">
    <a class="btn" th:href="@{/admin/usuarios/nuevo}">+ Nuevo usuario</a>
    <a class="btn" th:href="@{/admin/clientes}">Volver</a>
  </div>
</div>

<!-- <div class="msg-ok" th:if="${ok}" th:text="${ok}"></div>
<div class="msg-err" th:if="${err}" th:text="${err}"></div> -->

<table>
  <thead>
  <tr>
    <th>Username</th>
    <th>Rol</th>
  </tr>
  </thead>
  <tbody>
  <tr th:if="${#lists.isEmpty(usuarios)}">
    <td colspan="2">No hay usuarios.</td>
  </tr>
  <tr th:each="u : ${usuarios}">
    <td th:text="${u.username}">user</td>
    <td class="role" th:text="${u.rol}">ADMIN</td>
  </tr>
  </tbody>
</table>
<script>
  // Elimina los toasts del DOM luego de 3 segundos
  setTimeout(() => {
    document.querySelectorAll('.toast').forEach(t => t.remove());
  }, 3000);
</script>

</body>
</html>
